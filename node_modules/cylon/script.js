var Cylon = require('./');

Cylon.config({
  api: { ssl: false }
})

Cylon.api();

Cylon.commands.echo = function(arg) {
  if (arg == null) {
    throw new Error("No value passed to echo");
  }
  return arg;
};

Cylon.robot({
  name: "TestBot",

  connection: {
    name: 'loopback',
    adaptor: 'loopback',
    port: '/dev/null',
    test: 'abc'
  },

  device: {
    name: 'ping',
    driver: 'ping',
    pin: '13',
    test: 'abc'
  },

  commands: function() {
    return {
      hello: this.hello
    }
  },

  work: function(my) {
    every((5).seconds(), my.ping.ping);
  },

  hello: function(str) {
    return "Hello, " + str + "!";
  }
}).start();
